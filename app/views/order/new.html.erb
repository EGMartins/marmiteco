<script type="text/javascript" src="https://stc.pagseguro.uol.com.br/pagseguro/api/v2/checkout/pagseguro.directpayment.js"></script>

<div class="container">
   <div class="row">
     <h2 class="col-md-4 col-md-offset-4">Finalize sua compra</h2>
   </div>
   <p>Session id: <%= @session_id %></p>
   <legend>Dados do Produto</legend>
   <p>Nome: <%= @product.title %></p>
   <p>Preço: $<%= @product.price %></p>
   <p>Descrição: <%= @product.description %></p>
   <input id='price' type="hidden" value="210">
   <div id="payment_datas">
   <form class="form-horizontal" role="form" action="/order/create" method="POST">
     <div id='payment-datas'>
       <div>
         <input type="hidden" name="product_id" value="<%= @product.id %>">
         <input type="hidden" name="card_token" id="card_token" />
         <input type="hidden" name="sender_hash" id="sender_hash" />
         <input type="hidden" name="session_id" id="session_id" value="<%= @session_id %>" />
         <%= csrf_meta_tag %>
       </div>
       <fieldset>
         <legend>Dados Pessoais do Comprador</legend>
         <div class="form-group">
           <label class="col-sm-3 control-label">Nome Completo</label>
           <div class="col-sm-4">
             <input type="text" class="form-control" name='name' placeholder="exp: José Paulo" required>
           </div>
         </div>
         <div class="form-group">
           <label class="col-sm-3 control-label">Email</label>
           <div class="col-sm-4">
             <input type="text" class="form-control" name='email' placeholder="exp: c56048717318@sandbox.pagseguro.com.br" required>
           </div>
           *No sandbox use o email: c56048717318@sandbox.pagseguro.com.br
         </div>

         <div class="form-group">
           <label class="col-sm-3 control-label">Cpf</label>
           <div class="col-sm-2">
             <input type="text" class="form-control" name='cpf' placeholder="39813476548" required>
           </div>
           * Não use . ou - no CPF ou trate isso :)
         </div>

        <div class="form-group">
           <label class="col-sm-3 control-label">Rua</label>
           <div class="col-sm-4">
             <input type="text" class="form-control" name='street' placeholder="Nome da Rua" required>
           </div>
        </div>
        <div class="form-group">
           <label class="col-sm-3 control-label">Numero</label>
           <div class="col-sm-4">
             <input type="text" class="form-control" name='number' placeholder="Numero" required>
           </div>
        </div>
        <div class="form-group">
           <label class="col-sm-3 control-label">Bairro</label>
           <div class="col-sm-4">
             <input type="text" class="form-control" name='district' placeholder="Bairro" required>
           </div>
        </div>
        <div class="form-group">
           <label class="col-sm-3 control-label">CEP</label>
           <div class="col-sm-4">
             <input type="text" class="form-control" name='zipcode' placeholder="CEP" required>
           </div>
        </div>
        <div class="form-group">
           <label class="col-sm-3 control-label">Cidade</label>
           <div class="col-sm-4">
             <input type="text" class="form-control" name='city' placeholder="Cidade" required>
           </div>
        </div>
        <div class="form-group">
           <label class="col-sm-3 control-label">Estado</label>
           <div class="col-sm-4">
             <input type="text" class="form-control" name='state' placeholder="Estado" required>
           </div>
        </div>
        <div class="form-group">
           <label class="col-sm-3 control-label">Pais</label>
           <div class="col-sm-4">
             <input type="text" class="form-control" name='country' placeholder="Pais" required>
           </div>
        </div>




         <div class="form-group">
           <label class="col-sm-3 control-label">Telefone</label>
           <div class="col-sm-1">
             <input type="text" class="form-control" name='phone_code' placeholder="11" required>
           </div>
           <div class="col-sm-2">
             <input type="text" class="form-control" name='phone_number' placeholder="997874567" required>
           </div>
         </div>
         <div class="form-group">
           <label class="col-sm-3 control-label">Data de Nascimento</label>
           <div class="col-sm-2">
             <input type="text" class="form-control" name='birthday' placeholder="10/10/1991" required>
           </div>
         </div>
       </fieldset>
       <fieldset>
         <legend>Dados do Cartão</legend>

          
          <%= render 'card' %>

         
         <div class="form-group">
           <div class="col-sm-offset-3 col-sm-9">
             <button type="button" class="btn btn-success" id="buy-button">Confirmar dados do cartão</button>
           </div>
         </div>
       </fieldset>
     </div>
     <div id='finish-buy' style="display: none">
       <fieldset>
         <legend>Confirmar Pagamento</legend>
         <div class="form-group">
           <div class="col-sm-offset-3 col-sm-9">
             <%= csrf_meta_tags %>
             <button type="submit" class="btn btn-success" id="buy-button">Finalizar Compra</button>
             <button type="button" class="btn btn-primary" id="edit-payment">Editar Meio de Pagamento</button>
           </div>
         </div>
       </fieldset>
     </div>
   </form>
 </div>
</div>